# CLI
The **check-rule-mate CLI** provides a unified set of tools to **inspect, validate, document, and explore** your validation system.

It is designed to work directly with your existing **rules, schemas, error messages**, and **validators**, without requiring framework-specific integrations.

## Overview
The CLI helps you:

- Generate human-readable automatic documentation
- Validate template consistency (schemas, rules, errors)
- Experiment with validation logic in a browser playground
- Catch mistakes early, before runtime

All commands are executed via `npx check-rule-mate`, without global installation.

## Installation
The CLI is bundled with the package.
```bash
npm install check-rule-mate
```
No additional setup is required for the core commands.

## Command Structure
```bash
npx check-rule-mate <command> [options]
```

Available commands:
- `docs`: Generate static HTML documentation
- `docs:playground`: Generate interactive documentation with playground (experimental)
- `verify`: Validate schemas, rules, and errors consistency

## Docs - Generate Documentation

Generates a **static HTML documentation file** based on your validation templates.

This documentation includes:

- Schemas
- Rules (including modifiers)
- Error messages
- Rule descriptions and notes (when provided)

### Usage
```bash
npx check-rule-mate docs \
  --rules {rules-path} \
  --schemas {schemas-path} \
  --errors {errors-path} \
  --out {output-file.html}
```

### Options
| Option      | Description                       |
| ----------- | --------------------------------- |
| `--rules`   | Path to the rules folder          |
| `--schemas` | Path to the schemas folder        |
| `--errors`  | Path to the error messages folder |
| `--out`     | Output HTML file                  |

### Output
- A single, self-contained HTML file
- Can be shared, hosted, or versioned
- Ideal for product, QA, and documentation teams

## docs:playground - Documentation Playground (Experimental)

> ⚠️ Experimental feature
This command bundles and executes validation logic in the browser.

Generates an **interactive HTML** documentation page that includes:
- Full validation documentation
- A playground to test schemas and rules in real time
- Client-side execution of validation helpers

This is especially useful for:
- Exploring complex rule behavior
- Debugging schemas
- Demonstrating validation logic to non-developers

### Requirements
This command depends on **optional dependencies** that are **not installed by default**.

Before running it, install:
```bash
npm install esbuild
```

### Usage
```bash
npx check-rule-mate docs:playground \
  --rules {rules-path} \
  --schemas {schemas-path} \
  --errors {errors-path} \
  --options {options-path} \
  --out {output-file.html}
```

### Options File
The playground requires an **options file** that maps validator names to source files.

Example:
```json
{
  "validators": {
    "myValidator": "./validators/validators.js",
    "nameValidator": "./validators/validators.js",
    "myValidator2": "./validators/validator2.js"
  }
}
```

**How it Works**:
- **Keys**: exported object/function/class names
- **Values**: paths to files containing those validators
- Validators are bundled and injected into the playground
- Prevents magic imports and keeps builds explici

### Security Note
> ⚠️ The playground executes bundled JavaScript in the browser.
**Do not use untrusted validation code**.

## Verify - Template Consistency Checker
Validates the **integrity and consistency** of your validation templates.

It ensures:

- Schemas reference existing rules
- Rules reference existing error messages
- Modifiers are valid
- Error keys exist
- No broken references across templates

This command is ideal for:

- CI pipelines
- Large validation systems
- Preventing silent runtime failures

### Usage
```bash
npx check-rule-mate verify \
  --rules {rules-path} \
  --schemas {schemas-path} \
  --errors {errors-path}
```

### Success Output
```bash
✔ Schemas loaded: 4
✔ Rules loaded: 6
✔ Errors loaded: 6

✔ No issues found
```

### Error Output Example
```bash
❌ Validation failed

❌ Schema "contactUs.json" → field "phone" references rule "cellphone" which does not exist
```

## CLI Design Philosophy
The CLI follows these principles:

- No global installation required
- Explicit inputs, no magic
- Fail fast
- Human-readable output
- Safe by default
- Optional experimental features

Each command is designed to solve a **real validation workflow problem**, not just generate artifacts.

## Recommend Usage Flow
A common workflow looks like this:

1. Design rules and schemas
2. Run `verify` to ensure consistency
3. Generate documentation with `docs`
4. Explore behavior with `docs:playground`
5. Integrate validation into your app

## Summary
| Command           | Purpose                                      |
| ----------------- | -------------------------------------------- |
| `docs`            | Generate static HTML documentation           |
| `docs:playground` | Interactive docs + playground (experimental) |
| `verify`          | Validate template consistency                |
